{% load static %}
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <script src="https://cdn.plot.ly/plotly-2.1.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link rel="stylesheet" href="https://fonts.gooleapis.com/css">
    <link rel="stylesheet" href="{%static "speedometer.css" %}">
    <title> Monitoring Bendungan </title>
  </head>

  <body>
    <div class="container border border-secondary">
      <!-- NAVBAR -->
      <div class="row" style="background: #D6C6DF; font-family: Lucida Sans; font-size: 20px">
      <nav class="navbar navbar-light">
        <div class="container-fluid">
          <a class="navbar-brand ms-4" href="#">
            <img src="https://drive.google.com/uc?export=view&id=1SQNcKAlA7trF4yrsg0-8lsY4hb2RnY9S" alt="Logo Unhas" width="35px" height="40px" class="d-inline-block align-text-middle"> </img>
            <span> <strong> Departemen Fisika, Universitas Hasanuddin </strong> </span>
          </a>
        </div>
      </nav>
    </div>
    <!-- NAVBAR -->

    <!-- NAVBAR PILIHAN -->
   <div class= "row" style="background: #7C6A86; font-family: open sans; font-size: 15px">
     <ul class="nav nav-tabs ps-5">
       <li class="nav-item">
         <a class="nav-link active" aria-current="page" href="#"> Home </a>
       <li class="nav-item">
         <a class="nav-link text-light"  aria-current="page" href="../grafik_data/"> Grafik Data</a>
       </li>
       <li class="nav-item">
         <a class="nav-link text-light" aria-current="page" href="../tabel_data/"> Tabel Data </a>
       </li>
       <li class="nav-item">
         <a class="nav-link text-light" aria-current="page" href="../jenis_sensor/"> Jenis Sensor </a>
       </li>
     </ul>
   </div>
   <!-- NAVBAR PILIHAN -->

   <!-- ISI -->
   <div class="row px-5" style="background: #f2f2f2">
     <!--baris pertama-->
     <div class="row py-3">
       <div class="col">
         <div class="row">
         <div class="card border-light" >
           <div class="card-body text-center" style="text-align: justify; font-size: 45px; color: #440066">
             <p> <strong> Selamat Datang! </strong> </p>
           </div>
         </div>
       </div>
       <div class="row pt-3">
         <div class="card">
           <div class="card-body" style=" text-align: justify">
             <h6 class="card-text">
               Laman ini menyajikan data <em> realtime </em> pengukuran ketinggian air
               dan curah hujan pada <strong> Bendungan Kampili, Desa Bontoramba, Kecamatan Palangga, Kabupaten Gowa. </strong> <br>
               Terima kasih telah berkunjung.
             </h6>

           </div>
         </div>
       </div>
       </div>

       <div class="col">
         <div class="card border-light">
           <div class="card-header" style="color: #440066">
             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bar-chart-line-fill" viewBox="0 0 16 16">
               <path d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2z"/>
             </svg>
             Pengukuran Realtime
           </div>
           <div class="card-body">
             <div class="wrapper">
               <div class="rang">
                 <div class="rang-title">
                 <input class="rang-number" id="show" type="text" value="" disabled="disabled">
                 </div>
                 <svg class="meter">
                   <circle class="meter-left" r="96" cx="135" cy="142"> </circle>
                   <circle class="meter-center" r="96" cx="136" cy="142"></circle>
                   <circle class="meter-right" r="96" cx="138" cy="142"></circle>
                   <polygon class="meter-clock" points="129,145 137,90 145,145"></polygon>
                   <circle class="meter-circle" r="10" cx="137" cy="145"></circle>
                   //input nilai
                 </svg>
                 <!--  <input class="rang-slider" id="range" type="range" min="0" max="100" value= /> -->
               </div>
             </div>
           </div>
         </div>
       </div>
       </div>
       <!--baris pertama-->


       <!--baris kedua-->
       <div class="row pt-2 pb-4">
         <div class="row row-cols-1 row-cols-md-3">
           <div class="col">
             <div class="card">
               <div class="card-body">
                 <h5 class="card-title" style="text-align: center">
                   <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar-week" viewBox="0 0 16 16">
                     <path d="M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm-3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm-5 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
                     <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                   </svg>
                 </h5>
                 <div class="card-text"  style="font-family: monospace; text-align: center">
                   <h6 id="date"> </h6>
                   <h5 id="time"> </h5>
                 </div>
               </div>
             </div>
           </div>

           <div class="col">
             <div class="card">
               <div class="card-body">
                 <p class="card-title" style="text-align: center; color: #440066">
                   <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bar-chart-line-fill" viewBox="0 0 16 16">
                     <path d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2z"/>
                   </svg>
                   Ketinggian Air </p>
                 <h4 class="card-text" id="data1" style="text-align: center"> </h4>
               </div>
             </div>
           </div>

           <div class="col">
             <div class="card">
               <div class="card-body">
                 <p class="card-title" style="text-align: center; color: #440066">
                   <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bar-chart-line-fill" viewBox="0 0 16 16">
                     <path d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2z"/>
                   </svg>
                   Curah Hujan </p>
                 <h4 class="card-text" id="data2" style="text-align: center"> </h4>
               </div>
             </div>
           </div>
         </div>
       </div>
       <!--baris kedua-->
    </div>
    <!-- ISI -->

    <!--CONTACT US-->
    <div class="row" style="background: #7C6A86; font-family: arial; font-size: 15px; color: #FFFFFF">
      <span class="mx-4"> <strong> Contact Us </strong> || evita.ardhiya99@gmail.com </span>
    </div>
    <!--CONTACT US-->

    <!--copyright-->
    <div class="row">
      <p class="text-center p-2"> &#169; 2021 | <em style="font-family: home; font-size: 17px">Evita Ardhiya Ramadhani <em> </p>
      </div>
    <!--copyright-->
  </div>
    <!--script data ketinggian air dan curah hujan + speedometer-->
    <script>
    if(typeof(EventSource) !== "undefined"){
      var source = new EventSource ("home/stream");
      source.onmessage = function(event){
        var getData = event.data;
        var data = getData.split(',');
        data[0] = 768 - data[0];
        //console.log(data[0]);
        //console.log(data[1]);
        document.getElementById ('data1').innerHTML = data[0] + " cm";
        document.getElementById ('data2').innerHTML = data[1] + " mm";
        var tanggal = data[2].split(".");

        //speedometer
        var rangeClock = document.querySelector('.meter-clock');
        var derajat = (data[0]*(45/187)) - 94.81;
        rangeClock.style.transform = 'rotate(' + derajat + 'deg)';

        //var data = data[0];
        if(data[0]<268){
          document.getElementById('show').value = "Aman"
        }
        else if (data[0]<468&&data[0]>268){
          document.getElementById('show').value = "Siaga"
        }
        else if (data[0]<668&&data[0]>468){
          document.getElementById('show').value = "Bahaya"
        }
      }

    }else{
      document.getElementById ('data1').innerHTML = "sorry your browser not support server-sent event";
      document.getElementById ('data2').innerHTML = "";
      document.getElementById ('data3').innerHTML = "";
    }
    </script>
    <!--script data ketinggian air dan curah hujan + speedometer-->

    <!--script tanggal+waktu-->
    <script type="text/javascript">
      window.onload = setInterval(clock,1000);
      function clock()
      {
        var d = new Date();
        var date = d.getDate();
        var month = d.getMonth();
        var montharr = ["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];
        month = montharr[month];
        var year = (d.getFullYear() + "");

        var day = d.getDay();
        var dayarr =["Minggu,","Senin,","Selasa,","Rabu,","Kamis,","Jumat,","Sabtu,"];
        day = dayarr[day];

        var hour =('0' + d.getHours()).slice(-2);
        var min = ('0' + d.getMinutes()).slice(-2);
        var sec = (('0' + d.getSeconds()).slice(-2) + ' WITA');
        document.getElementById("date").innerHTML=day + " " + date + " " + month + " " + year;
        document.getElementById("time").innerHTML=hour+":"+min+":"+sec;
      }
      </script>
    <!--script tanggal+waktu-->
  </body>
</html>
